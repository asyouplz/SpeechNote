%%{init: {'theme':'neutral'}}%%

graph LR
    subgraph "Core Components"
        PC[Plugin Core]
        TS[Transcription Service]
        WS[Whisper Service]
        AP[Audio Processor]
    end
    
    subgraph "Support Components"
        EM[Event Manager]
        SM[State Manager]
        CM[Cache Manager]
        LG[Logger]
        EH[Error Handler]
    end
    
    subgraph "UI Components"
        TM[Transcription Modal]
        ST[Settings Tab]
        SB[Status Bar]
        FP[File Picker]
    end
    
    subgraph "Infrastructure"
        FM[File Manager]
        SET[Settings Manager]
        HTTP[HTTP Client]
        RETRY[Retry Strategy]
        RL[Rate Limiter]
    end
    
    %% Core Dependencies
    PC -->|initializes| TS
    PC -->|manages| EM
    PC -->|controls| SM
    PC -->|configures| SET
    
    TS -->|uses| WS
    TS -->|uses| AP
    TS -->|caches with| CM
    TS -->|emits to| EM
    
    WS -->|http calls| HTTP
    WS -->|retries with| RETRY
    WS -->|limits with| RL
    WS -->|logs to| LG
    
    AP -->|reads with| FM
    AP -->|validates| FM
    AP -->|logs to| LG
    
    %% UI Dependencies
    TM -->|listens to| EM
    TM -->|updates| SM
    ST -->|saves to| SET
    SB -->|observes| SM
    FP -->|uses| FM
    
    %% Support Dependencies
    EM -->|notifies| SM
    EH -->|logs to| LG
    EH -->|notifies| EM
    
    %% Infrastructure Dependencies
    HTTP -->|errors to| EH
    RETRY -->|logs to| LG
    RL -->|tracks in| CM
    
    %% Styling
    style PC fill:#ffd54f,stroke:#f57c00,stroke-width:3px
    style TS fill:#81c784,stroke:#388e3c,stroke-width:2px
    style WS fill:#64b5f6,stroke:#1976d2,stroke-width:2px
    style AP fill:#ba68c8,stroke:#7b1fa2,stroke-width:2px